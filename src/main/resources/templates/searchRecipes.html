<!DOCTYPE html>
<html>

<head>
	<title>
		Cerca ricette
	</title>
	<link rel="stylesheet" href="/css/searchRecipes.css?version=3"/>
	<script src="js/3.7.1_jquery.min.js"></script>
	<script src="js/searchRecipes.js"></script>
</head>

<body>
	<span th:if="${searchIngredients}" id="previousSearch">
		<span id="searchedIngredients" th:each="ingredient, lastItem : ${searchIngredients}" th:text="!${lastItem.last} ? ${ingredient.name} + ', ' : ${ingredient.name}"></span>
	</span>
	<br>
	<span th:if="${searchIngredients}" class="search-results">
		<span th:if="@{${recipes.size()}>1}" th:text="'Trovate '+${recipes.size()}+' ricette'"></span>
		<span th:if="@{${recipes.size()}==1}" text="Trovata una ricetta"></span>
		<span th:if="@{${recipes.size()}==0}" text="Nessuna ricetta trovata"></span>
	</span>
	<form th:action="@{/searchRecipes}" method="post">
		<div id="selectors">
			<div id="ingredient" style="display: none;"  class="ingredient">
				<select id="ingredientSelector" style="display: none;">
			      <option th:each="ingredient : ${ingredients}" th:text="${ingredient.name}" th:value="${ingredient.id}" th:id="${ingredient.id}"></option>
			    </select>
				<a class="icon-button delete" id="ingredientRemove">
					<svg width="100%" height="100%" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon">
					 <path d="M17 7L7 17M7 7L17 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
				</a>
			</div>
			<div id="ingredient0" class="ingredient">
				<select name="ingredient" id="ingredientSelector0">
			      <option th:each="ingredient : ${ingredients}" th:text="${ingredient.name}" th:value="${ingredient.id}" th:id="${ingredient.id}"></option>
			    </select>
				<a class="icon-button delete" id="ingredientRemove0">
					<svg width="100%" height="100%" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon">
					 <path d="M17 7L7 17M7 7L17 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
				 </a>
			</div>
			<a class="icon-button add" id="newIngredient">
					<svg width="100%" height="100%" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon">
				 <path d="M12 5V19M5 12H19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
			 </a>
		</div>
		
	   <button id="submit" type="submit">Cerca</button>
	  </form>
	<div th:if="${recipes==null || recipes.isEmpty()}">Non ci sono ricette nel sistema con il nome inserito</div>
	<ul>
		<li th:each="recipe : ${recipes}">
			<span>
				<a th:href="@{'/recipe' + '/' + ${recipe.id}}" th:text="${recipe.name}"></a>
				<!-- <a th:href="@{'/cook' + '/' + ${recipe.cook.id}}" th:text="${recipe.cook.name} ${recipe.cook.surname}"></a> -->
			</span>
		</li>
	</ul>
</body>

</html>